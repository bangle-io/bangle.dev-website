(self.webpackChunkbangle_dev_website=self.webpackChunkbangle_dev_website||[]).push([[3882],{8215:function(e,t,n){"use strict";var a=n(7294);t.Z=function(e){var t=e.children,n=e.hidden,r=e.className;return a.createElement("div",{role:"tabpanel",hidden:n,className:r},t)}},5064:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var a=n(7294),r=n(9443);var i=function(){var e=(0,a.useContext)(r.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},l=n(6010),o="tabItem_1uMI",s="tabItemActive_2DSg";var u=37,c=39;var p=function(e){var t=e.lazy,n=e.block,r=e.defaultValue,p=e.values,d=e.groupId,m=e.className,g=i(),h=g.tabGroupChoices,f=g.setTabGroupChoices,k=(0,a.useState)(r),v=k[0],b=k[1],y=a.Children.toArray(e.children),w=[];if(null!=d){var N=h[d];null!=N&&N!==v&&p.some((function(e){return e.value===N}))&&b(N)}var E=function(e){var t=e.currentTarget,n=w.indexOf(t),a=p[n].value;b(a),null!=d&&(f(d,a),setTimeout((function(){var e,n,a,r,i,l,o,u;(e=t.getBoundingClientRect(),n=e.top,a=e.left,r=e.bottom,i=e.right,l=window,o=l.innerHeight,u=l.innerWidth,n>=0&&i<=u&&r<=o&&a>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(s),setTimeout((function(){return t.classList.remove(s)}),2e3))}),150))},x=function(e){var t,n;switch(e.keyCode){case c:var a=w.indexOf(e.target)+1;n=w[a]||w[0];break;case u:var r=w.indexOf(e.target)-1;n=w[r]||w[w.length-1]}null==(t=n)||t.focus()};return a.createElement("div",{className:"tabs-container"},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":n},m)},p.map((function(e){var t=e.value,n=e.label;return a.createElement("li",{role:"tab",tabIndex:v===t?0:-1,"aria-selected":v===t,className:(0,l.Z)("tabs__item",o,{"tabs__item--active":v===t}),key:t,ref:function(e){return w.push(e)},onKeyDown:x,onFocus:E,onClick:E},n)}))),t?(0,a.cloneElement)(y.filter((function(e){return e.props.value===v}))[0],{className:"margin-vert--md"}):a.createElement("div",{className:"margin-vert--md"},y.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==v})}))))}},7386:function(e,t,n){"use strict";n.d(t,{bz:function(){return p},T9:function(){return m},ae:function(){return h}});var a=n(3552),r=n(7294),i=n(5697),l=n.n(i),o=n(1756),s=n(5064),u=n(8215),c=n(1262);function p(e){var t=e.filePath,n=e.language,a=e.createEditor,i=e.defaultTab,l=void 0===i?"example":i,o=e.onEditorReady,s=void 0===o?function(){}:o,u=e.SideCar,c=(0,r.useRef)(a),p=(0,r.useState)(!1),g=p[0],h=p[1],f=(0,r.useCallback)((function(){return r.createElement(d,{createEditor:c.current,onReady:h})}),[c,h]);return r.createElement(r.Fragment,null,r.createElement(m,{filePath:t,language:n,component:f,defaultTab:l}),g?s(g):null,g&&u?r.createElement(u,{editor:g}):null)}function d(e){var t=e.createEditor,n=e.onReady,a=(0,r.useRef)();return(0,r.useEffect)((function(){var e=t(a.current);return n(e),function(){e.destroy()}}),[t,n]),r.createElement("div",{ref:a})}function m(e){var t=e.filePath,n=e.language,a=e.component,i=e.defaultTab,l=void 0===i?"example":i;return r.createElement(f,null,r.createElement(s.Z,{defaultValue:l,values:[{label:"Example",value:"example"},{label:"Source code",value:"src"}]},r.createElement(u.Z,{value:"example"},r.createElement(c.Z,null,a)),r.createElement(u.Z,{value:"src"},r.createElement(g,{filePath:t,language:n}))))}function g(e){var t=e.filePath,n=e.language,a=void 0===n?"js":n,i=(0,r.useState)(),l=i[0],s=i[1];return(0,r.useEffect)((function(){var e=!1;return function(e){return fetch(e).then((function(e){return e.text()}))}(t).then((function(t){e||s(t)})).catch((function(n){console.error(n),e||s("Error: Could not load source code at "+t)})),function(){e=!0}}),[s,t]),l?r.createElement(o.Z,{className:"language-"+a},l):"loading..."}function h(e){var t="",n="";return e.split(/>\s*</).forEach((function(e){e.match(/^\/\w/)&&(n=n.substring("  ".length)),t+=n+"<"+e+">\r\n",e.match(/^<?\w[^>]*[^\/]$/)&&(n+="  ")})),t.substring(1,t.length-3)}m.propTypes={component:l().func.isRequired,language:l().string,filePath:l().string.isRequired};var f=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).state={hasError:!1},t}return(0,a.Z)(t,e),t.getDerivedStateFromError=function(e){return{hasError:!0}},t.prototype.render=function(){return this.state.hasError?r.createElement("div",{style:{margin:"2rem 2rem",padding:"1rem 2rem",backgroundColor:"red",color:"white"}},"Whoops! There was an error loading this example, please file a github issue to report it"):this.props.children},t}(r.PureComponent)},7915:function(e,t,n){"use strict";n.r(t),n.d(t,{contentTitle:function(){return g},default:function(){return v},frontMatter:function(){return m},metadata:function(){return h},toc:function(){return f}});var a=n(2122),r=n(9756),i=(n(7294),n(3905)),l=n.p+"8837fe99904bd9d906815283b6494ad9.jsx",o=n(391),s=o.wx.nP,u=o.wx.Se;function c(e){void 0===e&&(e=document.getElementById("#editor"));var t=new o.bm([s.spec({levels:[1,2]}),u.spec()]),n=[s.plugins(),u.plugins()],a=new o._n({specRegistry:t,plugins:n,initialValue:"Hello world"});return new o.uF(e,{state:a})}var p=n(7386),d=["components"],m={title:"Your first Bangle Editor",sidebar_label:"Your first Bangle Editor"},g=void 0,h={unversionedId:"guides/first-editor",id:"guides/first-editor",isDocsHomePage:!1,title:"Your first Bangle Editor",description:"To get started with your first Bangle Editor let us buld an editor which supports bold and headings.",source:"@site/docs/guides/first-editor.mdx",sourceDirName:"guides",slug:"/guides/first-editor",permalink:"/docs/guides/first-editor",editUrl:"https://github.com/bangle-io/bangle.dev-website/edit/master/_bangle-website/docs/guides/first-editor.mdx",version:"current",frontMatter:{title:"Your first Bangle Editor",sidebar_label:"Your first Bangle Editor"},sidebar:"docs",previous:{title:"Emoji Suggestions\ud83e\udd14",permalink:"/docs/examples/react-emoji-suggest"},next:{title:"Custom Rendering",permalink:"/docs/guides/custom-rendering-speech"}},f=[{value:"Bangle component",id:"bangle-component",children:[{value:"SpecRegistry",id:"specregistry",children:[]},{value:"Plugins",id:"plugins",children:[]},{value:"initialValue",id:"initialvalue",children:[]}]}],k={toc:f};function v(e){var t=e.components,n=(0,r.Z)(e,d);return(0,i.kt)("wrapper",(0,a.Z)({},k,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"To get started with your first Bangle Editor let us buld an editor which supports ",(0,i.kt)("inlineCode",{parentName:"p"},"bold")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"headings"),"."),(0,i.kt)(p.bz,{filePath:l,language:"js",createEditor:c,defaultTab:"src",mdxType:"VanillaCodeExample"}),(0,i.kt)("p",null,"There is a lot going on in the above example, so lets distill it down into smaller parts:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Components"),": ",(0,i.kt)("inlineCode",{parentName:"li"},"heading"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"bold")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"specs"),": ",(0,i.kt)("inlineCode",{parentName:"li"},"heading.spec()"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"bold.spec()")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"plugins"),": ",(0,i.kt)("inlineCode",{parentName:"li"},"heading.plugins()"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"bold.plugins()")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"initialValue"),": ",(0,i.kt)("inlineCode",{parentName:"li"},"Hello world!"))),(0,i.kt)("h2",{id:"bangle-component"},"Bangle component"),(0,i.kt)("p",null,"A ",(0,i.kt)("a",{parentName:"p",href:"/docs/api/core#component"},"component")," is an object which hold smaller related things to form the building block of your editor. Let us look at high level overview of the ",(0,i.kt)("inlineCode",{parentName:"p"},"bold")," component:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"export const bold = {\n    spec(opts) {\n        type: 'mark',\n        name: 'bold',\n        schema: {\n            ...\n        },\n        markdown: {\n            ...\n        }\n    },\n    plugins(opts) {\n        return [ ... ]\n    },\n    commands: {\n        toggleBold: () => { .... },\n        ...\n    }\n}\n")),(0,i.kt)("h3",{id:"specregistry"},"SpecRegistry"),(0,i.kt)("p",null,"Short for specification, is an object that declaratively defines how your editor behaves, looks, its relationship with other entities and the parsing/serialization aspect of it.\nYou can either create a ",(0,i.kt)("a",{parentName:"p",href:"/docs/api/core#specregistry"},"SpecRegistry")," instance yourself or pass an array of specs and let Bangle create it for you internally."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const specs = [bold.spec()];\nconst state1 = new BangleEditorState({\n    specRegistry: new SpecRegistry(specs),\n    ...\n});\nconst state2 = new BangleEditorState({\n    specs: specs\n    ...\n});\n// state1 and state2 are essentially different\n// ways to do the same thing\n")),(0,i.kt)("p",null,"\ud83d\udca1 The ",(0,i.kt)("inlineCode",{parentName:"p"},"specs: [...]")," style should fit majority of use cases. The ",(0,i.kt)("inlineCode",{parentName:"p"},"new SpecRegistry")," syntax comes in handy when dealing with multiple syncronized editors which need to rely on a single instance of specRegistry\nor if your application needs access to {{core.links.Prosemirror.Schema}}."),(0,i.kt)("p",null,"You might have noticed that we are using an array to order the specs. For most use cases the order doesn't matter,\nhowever if two or more specs are competing, for example, a link spec vs bold spec, putting link spec before bold ensures\nthat your output will look like ",(0,i.kt)("inlineCode",{parentName:"p"},'<bold>will wrap <a href="hola">a link tag</a>'),"."),(0,i.kt)("p",null,"\ud83d\udcd6 Handy links:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/api/core#specregistry"},"SpecRegistry API"))),(0,i.kt)("h3",{id:"plugins"},"Plugins"),(0,i.kt)("p",null,"Plugins allow you to add interactivity to your editor. They allow for things like keyboard shortcuts, drag-n-drop, paste, etc."),(0,i.kt)("p",null,"\ud83d\udca1 Not every component has ",(0,i.kt)("inlineCode",{parentName:"p"},".plugin()"),", as some components are pretty simple, check the API doc of each component before using."),(0,i.kt)("p",null,"\ud83d\udca1 There is no explicit connection between a component's ",(0,i.kt)("inlineCode",{parentName:"p"},"plugins")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"spec"),", so feel free to mix, match them or even replace them with your own."),(0,i.kt)("p",null,"\ud83d\udcd6 Creating a custom component is a slightly complex topic, as you can pretty much do anything with plugins.\n",(0,i.kt)("strong",{parentName:"p"},"Only")," dig deeper into plugin API if you want to build your own plugins, here are some handy links:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/docs/api/core#plugins"},"Plugins API")),(0,i.kt)("li",{parentName:"ul"},"Simply put, plugins are just an array of ",(0,i.kt)("a",{parentName:"li",href:"https://prosemirror.net/docs/ref/#state.PluginSpec"},"Prosemirror.Plugin"),".")),(0,i.kt)("h3",{id:"initialvalue"},"initialValue"),(0,i.kt)("p",null,"Bangle accepts variety of things as initial value."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"You can use a vanilla string:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"new BangleEditorState({\n  initialValue: `Hello world`,\n});\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"You can use an html string. Check out ",(0,i.kt)("a",{parentName:"li",href:"/docs/examples/exporting-data"},"persist to localStorage")," example for more details.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"new BangleEditorState({\n  initialValue: `<div><p>Hello world</p></div>`,\n});\n")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Or a JSON doc. Check out ",(0,i.kt)("a",{parentName:"li",href:"/docs/examples/exporting-data#persisting-to-local-storage"},"persist to localStorage")," example for more details.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"new BangleEditorState({\n  initialValue: {\n    type: 'doc',\n    content: [\n      {\n        type: 'paragraph',\n        content: [\n          {\n            type: 'text',\n            text: 'Hello world',\n          },\n        ],\n      },\n    ],\n  },\n});\n")))}v.isMDXComponent=!0}}]);